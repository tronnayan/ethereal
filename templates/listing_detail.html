{% extends 'base.html' %}
{% block body_content %}
    <div class="container">

        <!-- Breadcrumb -->
        <nav class="position-relative pt-3 mt-3 mt-md-4 mb-4" aria-label="breadcrumb">
            {#            <ol class="breadcrumb">#}
            {#                <li class="breadcrumb-item"><a href="home-furniture.html">Home</a></li>#}
            {#                <li class="breadcrumb-item"><a href="shop-catalog-furniture.html">Shop</a></li>#}
            {#                <li class="breadcrumb-item active" aria-current="page">Product page</li>#}
            {#            </ol>#}
        </nav>


        <!-- Product gallery and details -->
        <section class="row pb-4 pb-md-5 mb-2 mb-md-0 mb-xl-3">

            <!-- Gallery -->
            <div class="col-md-7 col-xl-8 pb-4 pb-md-0 mb-2 mb-sm-3 mb-md-0">
                <div class="row row-cols-2 g-3 g-sm-4 g-md-3 g-lg-4">
                    {% for image in listing.get_starting_images %}
                        <div class="col">
                            <a class="hover-effect-scale hover-effect-opacity position-relative d-flex rounded-4 overflow-hidden"
                               href="{{ image.image_url }}" data-glightbox=""
                               data-gallery="product-gallery">
                                <span class="hover-effect-target position-absolute top-0 start-0 w-100 h-100 bg-black bg-opacity-25 opacity-0 z-1"></span>
                                <i class="ci-zoom-in hover-effect-target fs-3 text-white position-absolute top-50 start-50 translate-middle opacity-0 z-2"></i>
                                <div class="ratio ratio-1x1 hover-effect-target">
                                    <img src="{{ image.image_url }}" alt="Image">
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                    <div class="col-12">
                        <div class="collapse d-md-block" id="morePictures">
                            <div class="row row-cols-2 g-3 g-sm-4 g-md-3 g-lg-4 pb-3 pb-sm-4 pb-md-0">
                                {% for image in listing.get_all_images %}
                                    <div class="col">
                                        <a class="hover-effect-scale hover-effect-opacity position-relative d-flex rounded-4 overflow-hidden"
                                           href="{{ image.image_url }}" data-glightbox=""
                                           data-gallery="product-gallery">
                                            <span class="hover-effect-target position-absolute top-0 start-0 w-100 h-100 bg-black bg-opacity-25 opacity-0 z-1"></span>
                                            <i class="ci-zoom-in hover-effect-target fs-3 text-white position-absolute top-50 start-50 translate-middle opacity-0 z-2"></i>
                                            <div class="ratio ratio-1x1 hover-effect-target">
                                                <img src="{{ image.image_url }}" alt="Image">
                                            </div>
                                        </a>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        <button type="button" class="btn btn-lg btn-outline-secondary w-100 collapsed d-md-none"
                                data-bs-toggle="collapse" data-bs-target="#morePictures"
                                data-label-collapsed="Show more pictures" data-label-expanded="Show less pictures"
                                aria-expanded="false" aria-controls="morePictures" aria-label="Show / hide pictures">
                            <i class="collapse-toggle-icon ci-chevron-down fs-lg ms-2 me-n2"></i>
                        </button>
                    </div>
                </div>
            </div>


            <!-- Product details and options -->
            <div class="col-md-5 col-xl-4">
                <div class="d-none d-md-block" style="margin-top: -90px"></div>
                <div class="sticky-md-top ps-md-2 ps-xl-4">
                    <div class="d-none d-md-block" style="padding-top: 90px"></div>
                    <div class="fs-xs text-body-secondary mb-3">{{ listing.uuid | upper }}</div>
                    <h1 class="fs-xl fw-medium">{{ listing.name | title }}</h1>
                    <div class="h4 fw-bold mb-4">₹{{ listing.price }}
                        <del class="fs-sm fw-normal text-body-tertiary">₹ 299</del>
                    </div>
                    <ul class="list-unstyled fs-sm text-body-emphasis mb-4">
                        <li>
                            <span class="me-1">Can be <span class="fw-semibold">customised</span></span>
                            <a class="d-inline-block" href="#!" aria-label="Afterpay">
                                <svg xmlns="http://www.w3.org/2000/svg" width="80" viewBox="0 0 360 129.6">
                                    <path d="M297.4 127.4H62.7C28 127.4 0 99.4 0 64.8h0C0 30.2 28 2.1 62.7 2.1h234.7c34.6 0 62.6 28 62.6 62.6h0c0 34.7-28 62.7-62.6 62.7z"
                                          fill="#b2fce4"></path>
                                    <path d="M306.8 49.8l-7.9-4.5-8-4.6c-5.3-3-11.9.8-11.9 6.9v1c0 .6.3 1.1.8 1.4l3.7 2.1c1 .6 2.3-.2 2.3-1.3v-2.4c0-1.2 1.3-2 2.3-1.4l7.3 4.2 7.3 4.2c1.1.6 1.1 2.1 0 2.7l-7.3 4.2-7.3 4.2c-1 .6-2.3-.2-2.3-1.4v-1.2c0-6.1-6.6-9.9-11.9-6.9l-8 4.6-7.9 4.5c-5.3 3-5.3 10.7 0 13.8l7.9 4.5 8 4.6c5.3 3 11.9-.8 11.9-6.9v-1c0-.6-.3-1.1-.8-1.4l-3.7-2.1c-1-.6-2.3.2-2.3 1.3v2.4c0 1.2-1.3 2-2.3 1.4l-7.3-4.2-7.3-4.2c-1.1-.6-1.1-2.1 0-2.7l7.3-4.2 7.3-4.2c1-.6 2.3.2 2.3 1.4v1.2c0 6.1 6.6 9.9 11.9 6.9l8-4.6 7.9-4.5c5.4-3.1 5.4-10.7 0-13.8zm-51.6 1.5l-18.5 38.1H229l6.9-14.2-10.8-23.9h7.9l7 16 7.6-16h7.6zM70.8 64.9c0-4.5-3.3-7.7-7.4-7.7S56 60.4 56 64.9c0 4.4 3.3 7.7 7.4 7.7s7.4-3.2 7.4-7.7m.1 13.5v-3.5c-2 2.4-5 3.9-8.5 3.9-7.4 0-13-5.9-13-14 0-8 5.8-14 13.2-14 3.5 0 6.4 1.5 8.4 3.9v-3.4h6.7v27h-6.8zm38.9-6c-2.3 0-3-.9-3-3.1v-12h4.3v-5.9h-4.3v-6.6H100v6.6h-8.8v-2.7c0-2.3.9-3.1 3.2-3.1H96v-5.2h-3.3c-5.6 0-8.3 1.8-8.3 7.5v3.6h-3.8v5.9h3.8v21.1h6.8V57.2h8.8v13.3c0 5.5 2.1 7.9 7.6 7.9h3.5v-6h-1.3zm24.5-10c-.5-3.5-3.4-5.6-6.7-5.6-3.4 0-6.1 2.1-6.8 5.6h13.5zm-13.6 4.2c.5 4 3.4 6.3 7 6.3 2.9 0 5.1-1.4 6.4-3.5h7c-1.6 5.7-6.8 9.4-13.5 9.4-8.2 0-13.9-5.7-13.9-13.9s6.1-14.1 14.1-14.1c8.1 0 13.9 5.9 13.9 14.1 0 .6-.1 1.2-.2 1.7h-20.8zm64.2-1.7c0-4.4-3.3-7.7-7.4-7.7s-7.4 3.2-7.4 7.7c0 4.4 3.3 7.7 7.4 7.7s7.4-3.4 7.4-7.7m-21.4 24.5V51.3h6.7v3.5c2-2.5 5-4 8.5-4 7.3 0 13 6 13 14s-5.8 14-13.2 14c-3.4 0-6.2-1.4-8.2-3.6v14.2h-6.8zm52.2-24.5c0-4.5-3.3-7.7-7.4-7.7s-7.4 3.2-7.4 7.7c0 4.4 3.3 7.7 7.4 7.7s7.4-3.2 7.4-7.7m.1 13.5v-3.5c-2 2.4-5 3.9-8.5 3.9-7.4 0-13-5.9-13-14 0-8 5.8-14 13.2-14 3.5 0 6.4 1.5 8.4 3.9v-3.4h6.7v27h-6.8zM151.5 54s1.7-3.1 5.8-3.1c1.8 0 2.9.6 2.9.6v6.9s-2.5-1.5-4.8-1.2-3.8 2.4-3.7 5.2v16h-6.9v-27h6.7V54z"></path>
                                </svg>
                            </a>
                        </li>
                        <li>
                            <span class="me-1">We provide a <span class="fw-semibold">3-year warranty</span></span>
                            <svg class="text-body-emphasis" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                 fill="currentColor">
                                <path fill-rule="evenodd"
                                      d="M22.287 10.967l-1.7-2c-.215-.254-.346-.568-.373-.9L20 5.46c-.029-.379-.193-.734-.462-1.002s-.625-.43-1.004-.458l-2.607-.213c-.332-.027-.646-.158-.9-.373l-2-1.7c-.288-.247-.654-.383-1.033-.383s-.746.136-1.033.383l-2 1.7c-.254.215-.568.346-.9.373L5.467 4c-.38.028-.737.191-1.006.461s-.433.626-.46 1.006l-.213 2.607c-.027.332-.158.646-.373.9l-1.7 2c-.247.288-.383.654-.383 1.033s.136.746.383 1.033l1.7 2c.215.254.346.568.373.9L4 18.547c.031.377.196.731.465.998s.624.428 1.002.456l2.607.213c.332.027.646.158.9.373l2 1.7c.288.247.654.383 1.033.383s.746-.136 1.033-.383l2-1.7c.254-.215.568-.346.9-.373L18.534 20c.38-.028.737-.191 1.006-.46s.433-.626.46-1.006l.213-2.607c.027-.332.158-.646.373-.9l1.7-2c.245-.287.38-.652.38-1.03s-.135-.743-.38-1.03zm-11.08 4.153l-2.96-2.96 1.127-1.127 1.833 1.827 3.42-3.42 1.127 1.127-4.547 4.553z"></path>
                            </svg>
                        </li>
                    </ul>

                    <!-- Add to cart + Wishlist buttons -->
                    <div class="d-flex gap-3 pb-4 mb-2 mb-lg-3">
                        <button type="button" class="btn btn-lg btn-dark w-100 rounded-pill">Add to cart</button>
                        <button type="button" class="btn btn-icon btn-lg btn-secondary rounded-circle animate-pulse"
                                aria-label="Add to Wishlist">
                            <i class="ci-heart fs-lg animate-target"></i>
                        </button>
                    </div>

                    <!-- Shipping info -->
                    <div class="mb-4">
                        <h6 class="d-flex align-items-center fs-sm mb-2">
                            <i class="ci-delivery fs-lg me-2"></i>
                            Free shipping
                        </h6>
                        <div class="fs-sm">
                            <span class="me-1">Get it between May 24 - May 27 to</span>
                            <div class="dropdown d-inline-block">
                                <a class="dropdown-toggle animate-underline fs-sm fw-semibold text-body-emphasis text-decoration-none"
                                   href="#!" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <span class="animate-target">Preston - 06365</span>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end text-body p-3">
                                    Blackpool Road, 15<br>06365, Preston, UK
                                    <div class="h6 fs-sm pt-1 mb-0">Susan Gardner</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Contact -->
                    <div class="d-flex align-items-center justify-content-between bg-body-tertiary rounded p-3">
                        <div class="me-3">
                            <h6 class="fs-sm mb-1">Have a question?</h6>
                            <p class="fs-sm mb-0">Contact us if you have questions</p>
                        </div>
                        <a class="btn btn-sm btn-outline-dark rounded-pill" href="contact-v2.html">Contact us</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Product description -->
        <section class="row pb-5 mb-2 mb-sm-3 mb-lg-4 mb-xl-5">
            <div class="col-md-7 col-xl-8 mb-xxl-3">
                <p>{{ listing.description }}</p>
                <ul class="list-unstyled pb-md-2 pb-lg-3">
                    <li class="mt-1"><span class="h6 mb-0">Dimensions:</span> {{ listing.dimensions }}</li>
                    <li class="mt-1"><span class="h6 mb-0">Weight:</span> {{ listing.weight }} Kilogram</li>
                    <li class="mt-1"><span class="h6 mb-0">Shipping Charges:</span> ₹{{ listing.shipping_charges }}</li>
                </ul>

                <div class="accordion accordion-alt-icon" id="productAccordion">
                    <div class="accordion-item">
                        <h3 class="accordion-header" id="headingProductInfo">
                            <button type="button" class="accordion-button animate-underline fs-xl collapsed"
                                    data-bs-toggle="collapse" data-bs-target="#productInfo" aria-expanded="false"
                                    aria-controls="productInfo">
                                <span class="animate-target me-2">Product info</span>
                            </button>
                        </h3>
                        <div class="accordion-collapse collapse" id="productInfo" aria-labelledby="headingProductInfo"
                             data-bs-parent="#productAccordion">
                            <div class="accordion-body fs-base">{{ listing.description }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- Popular products carousel -->
        <section class="pb-5 mb-1 mb-sm-3 mb-lg-4 mb-xl-5">
            <h2 class="h3 pb-2 pb-sm-3">Popular products</h2>
            <div class="position-relative pb-xxl-3">

                <!-- External slider prev/next buttons visible on screens > 500px wide (sm breakpoint) -->
                <button type="button"
                        class="popular-prev btn btn-icon btn-outline-secondary bg-body rounded-circle animate-slide-start position-absolute top-50 start-0 z-2 translate-middle mt-n5 d-none d-sm-inline-flex"
                        aria-label="Prev">
                    <i class="ci-chevron-left fs-lg animate-target"></i>
                </button>
                <button type="button"
                        class="popular-next btn btn-icon btn-outline-secondary bg-body rounded-circle animate-slide-end position-absolute top-50 start-100 z-2 translate-middle mt-n5 d-none d-sm-inline-flex"
                        aria-label="Next">
                    <i class="ci-chevron-right fs-lg animate-target"></i>
                </button>

                <!-- Slider -->
                <div class="swiper" data-swiper="{
              &quot;slidesPerView&quot;: 2,
              &quot;spaceBetween&quot;: 24,
              &quot;loop&quot;: true,
              &quot;navigation&quot;: {
                &quot;prevEl&quot;: &quot;.popular-prev&quot;,
                &quot;nextEl&quot;: &quot;.popular-next&quot;
              },
              &quot;breakpoints&quot;: {
                &quot;768&quot;: {
                  &quot;slidesPerView&quot;: 3
                },
                &quot;992&quot;: {
                  &quot;slidesPerView&quot;: 4
                }
              }
            }">
                    <div class="swiper-wrapper">
                        {% for listing in related_products %}
                            <!-- Item -->
                            <div class="swiper-slide">
                                <div class="animate-underline">
                                    <a class="hover-effect-opacity ratio ratio-1x1 d-block mb-3"
                                       href="#">
                                        <img src="{{ listing.get_primary_image }}"
                                             class="hover-effect-target opacity-100" alt="Product">
                                        <img src="{{ listing.images.first.image_url }}"
                                             class="position-absolute top-0 start-0 hover-effect-target opacity-0 rounded-4"
                                             alt="Room">
                                    </a>
                                    <div class="d-flex gap-2 mb-3">
                                        {% for image in listing.images.all %}
                                            <label for="color-4-1" class="d-inline-block"
                                                   style="height: 40px">
                                                <img src="{{ image.image_url }}" class="w-100 h-100 object-fit-cover">
                                            </label>
                                        {% endfor %}
                                    </div>
                                    <h3 class="mb-2">
                                        <a class="d-block fs-sm fw-medium text-truncate"
                                           href="#">
                                            <span class="animate-target">{{ listing.name }}</span>
                                        </a>
                                    </h3>
                                    <div class="h6">₹{{ listing.price }}</div>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-dark w-100 rounded-pill px-3">Add to cart
                                        </button>
                                        <button type="button"
                                                class="btn btn-icon btn-secondary rounded-circle animate-pulse"
                                                aria-label="Add to wishlist">
                                            <i class="ci-heart fs-base animate-target"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}

                    </div>
                </div>
            </div>

            <!-- External slider prev/next buttons visible on screens < 500px wide (sm breakpoint) -->
            <div class="d-flex justify-content-center gap-2 mt-1 pt-4 d-sm-none">
                <button type="button"
                        class="popular-prev btn btn-icon btn-outline-secondary bg-body rounded-circle animate-slide-start me-1"
                        aria-label="Prev">
                    <i class="ci-chevron-left fs-lg animate-target"></i>
                </button>
                <button type="button"
                        class="popular-next btn btn-icon btn-outline-secondary bg-body rounded-circle animate-slide-end"
                        aria-label="Next">
                    <i class="ci-chevron-right fs-lg animate-target"></i>
                </button>
            </div>
        </section>
    </div>
{% endblock %}